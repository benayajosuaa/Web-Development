
### 1 
<aside>

## set up REST-API ðŸ”§

</aside>

> cara set up REST API pada visual studio code
> 

### **a. buat Direktori Proyek**

buka terminal dan jalankan perintah berikut â†’ untuk membuat folder dan mengubah directory kedalam file tersebut

```bash
mkdir my-api
cd my-api
npm init -y
```

**penjelasan**

- `mkdir` membuat direktori projek
- `cd` masuk ke dalamnya
- `npm init -y` menghasilkan file **`package.json`** secara otomatis, yang penting untuk mencatat semua dependensi dan skrip proyek

### b. install dependecies

install dependencies utama

```bash
npm install express cors dotenv
```

**penjelasan**

- `express` â†’ framework backend minimalis untuk membuat server HTTP
- `cors` â†’ mengizinkan komunikasi lintas domain (penting saat frontend dan backend di domain berbeda).
- `dotenv` â†’ untuk mengatur konfigurasi environment (`.env`), seperti `PORT`, `DB_URI`, `JWT_SECRET`, dll.

### **c. install Dev Dependencies**

instal dependencies untuk pengembangan:

```bash
	npm install --save-dev typescript ts-node @types/node @types/express nodemon
```

**penjelasan**

- `typescript` â†’ bahasa pemrograman berbasis JavaScript + tipe data statis
- `ts-node` â†’ menjalankan file `.ts` langsung tanpa perlu compile dulu
- `@types/...` â†’ definisi tipe untuk Node.js & Express
- `nodemon` â†’ otomatis restart server saat file berubah

<br/>

## Set Up Typescript :ts:

### **d. konfigurasi TypeScript**

inisialisasi TypeScript:

```bash
npx tsc --init
```

### **e. edit File `tsconfig.json`**

buka `tsconfig.json`, lalu ubah baris berikut:

- **Uncomment** dan atur `outDir`
- **Uncomment** dan atur `rootDir`
- bisa mengikuti struktur `tsconfig.js` yang harus di uncomment
    
    ```json
    {
      "compilerOptions": {
        "rootDir": "./src",
        "outDir": "./dist",
    
        "module": "nodenext",
        "target": "es2020",
        "moduleResolution": "nodenext",
        "types": [],
    
        "sourceMap": true,
        "declaration": true,
        "declarationMap": true,
    
        "noUncheckedIndexedAccess": true,
        "exactOptionalPropertyTypes": true,
    
        "strict": true,
        "jsx": "react-jsx",
    
        "isolatedModules": true,
        "noUncheckedSideEffectImports": true,
        "moduleDetection": "force",
        "skipLibCheck": true,
        "esModuleInterop": true
      }
    }
    
    ```
    
    **penjelasan**
    
    - `rootDir` â†’ agar semua file `.ts` disimpan di `src`
    - `outDir` â†’ hasil build TypeScript akan dikompilasi ke `dist`
    - `esModuleInterop` â†’ memungkinkan kita menggunakan `import express from 'express'` tanpa error.

### **f. buat File `nodemon.json`**

buat file `nodemon.json` di direktori root proyek, lalu isi dengan:

```bash
touch nodemon.json
```

kemudian edit seperti dibawah ini

```json
{
    "watch": ["src"],
    "ext": "ts",
    "exec": "ts-node src/index.ts"
}
```

**penjelasan**

- `watch` â†’ memantau perubahan dalam folder `src`
- `ext` â†’ hanya file dengan ekstensi `.ts`
- `exec` â†’ perintah untuk menjalankan project

**kegunaan**

installasi library **`nodemon`**

fungsinya untuk mengubah otomatis melakukan perubahan code dengan merestart terminal 

contoh : mengganti port yang di ubah (tanpa **`npm run dev`** lagi)

### **g. Tambahkan Skrip di `package.json`**

buka `package.json`, lalu tambahkan skrip berikut:

```json
{
  "name": "my-api",
  "version": "1.0.0",
  "type": "module",
  "scripts": {
    "dev": "nodemon",
    "build": "tsc",
    "start": "node dist/index.js"
  },
  "dependencies": {
    "express": "^4.18.2",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1"
  },
  "devDependencies": {
    "typescript": "^5.2.2",
    "ts-node": "^10.9.1",
    "@types/node": "^20.8.0",
    "@types/express": "^4.17.19",
    "nodemon": "^3.0.1"
  }
}
```

**penjelasan**

- `dev` â†’ digunakan saat pengembangan (hot reload)
- `build` â†’ meng-compile TypeScript ke JavaScript
- `start` â†’ menjalankan hasil build (`dist`)

<br/>

## Folder

### **h. Buat Folder dan File Utama**

buat folder `src` dan file `index.ts`:

```bash
mkdir -p src/{controllers,service,routes,middleware,models,validation,interface,utils}
touch src/index.ts
```

**kegunaan**

men-create server rest api dengan express

Ini penting agar proyek kamu modular, terorganisir, dan mudah untuk dikembangkan saat tim bertambah besar atau fitur bertambah.

- **`service`**
    
    Direktori ini menampung **logika bisnis inti** yang kompleks. Fungsi-fungsi di sini sering **berinteraksi dengan database (melalui Prisma)** **dan dipanggil oleh controller**. Memisahkan logika ini dari controller membuatnya lebih mudah diuji dan dikelola
    
- **`routes`**
    
    Direktori ini mendefinisikan **endpoint API**. Setiap file router **memetakan URL ke fungsi controller** yang sesuai
    
- **`middleware`**
    
    Folder ini berisi middleware, yaitu **fungsi-fungsi yang dieksekusi di antara permintaan dan respons**
    Contohnya adalah otentikasi, validasi, atau logging
    
- **`models`**
    
    model data untuk database (kalau pakai ORM/ODM)
    
- **`validation`**
    
    Direktori ini **menyimpan skema validasi** (misalnya, menggunakan Joi atau Zod) untuk memastikan data yang masuk (seperti dari body permintaan) memiliki format yang benar
    
- **`interface`** menjaga konsistensi tipe data antar file
- **`utils`**
    
    Singkatan dari "utilities". Sama seperti `lib`, ini adalah folder untuk **fungsi-fungsi kecil yang bisa digunakan kembali**, seperti format tanggal atau fungsi enkrips
    
- **`lib`**
    
    Singkatan dari "`library`". Folder ini biasanya menyimpan **kode utilitas atau helper functions** yang digunakan di seluruh aplikasi, tetapi tidak sesuai untuk kategori lain
    
- **`config.ts`**
    
    File ini berisi konfigurasi global untuk aplikasi, seperti konfigurasi database, kunci API, atau variabel dari `.env`.
    
- **`index.ts`**
    
    ini adalah **titik masuk (entry point) utama** aplikasi. File ini biasanya menginisialisasi server, menghubungkan database, dan memanggil file router untuk menyiapkan endpoint API
    
- **`controllers`**
    
    **menangani permintaan dari router**. Mereka memproses logika bisnis dan berinteraksi dengan layanan (services) atau model (jika ada) untuk menghasilkan respons
    

**Tampilan Directory :** 

```tsx
src/
â”œâ”€â”€ controllers/      # Tempat file controller untuk handle request & response
â”œâ”€â”€ service/          # Tempat file service (business logic)
â”œâ”€â”€ routes/           # Tempat file routing (menghubungkan endpoint dengan controller)
â”œâ”€â”€ middleware/       # Tempat middleware seperti auth, logger, dsb.
â”œâ”€â”€ models/           # Tempat schema database (ORM/ODM)
â”œâ”€â”€ validation/       # Tempat validasi data (Joi, Zod, Yup, dll.)
â”œâ”€â”€ interface/        # Tempat TypeScript interfaces & types
â”œâ”€â”€ utils/            # Tempat helper & utility functions
â””â”€â”€ index.ts          # Entry point utama project
â””â”€â”€ config.ts         # Entry point configurasi project
```

isi `src/index.ts` dengan kode dasar:

```tsx
import express from 'express';
import { Request, Response } from 'express';
import dotenv from 'dotenv';

dotenv.config();

const app = express();
const PORT = process.env.PORT || 8080;

app.use(express.json());
app.use(express.urlencoded({ extended: true }));

app.get('/', (req: Request, res: Response)=> {
    res.status(200).send("testing halobenaya Express API")
    
})

app.listen(PORT, () => {
    console.log(`Server running at http://localhost:${PORT}`);
});
```

**penjelasan**

- `dotenv.config()` â†’ baca konfigurasi dari file `.env`
- `express.json()` â†’ parse body request dengan format JSON
- `urlencoded()` â†’ untuk menerima data dari form
- `router` â†’ mengarahkan endpoint `/api/...` ke handler masing-masing

### **i. Jalankan Proyek**

untuk menjalankan server dalam mode pengembangan:

```bash
npm run dev
```

untuk membangun proyek:

```bash
npm run build
```

untuk menjalankan hasil build:

```bash
npm start
```
